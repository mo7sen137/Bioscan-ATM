<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bioscan ATM | Secure Access</title>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Orbitron:wght@400;500;700&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css">
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>

    <style>
        /* --- 1. THEME & VARIABLES --- */
        :root {
            --primary-neon: #00f2ff;
            --secondary-neon: #7000ff;
            --bg-dark: #020408;
            --glass-panel: rgba(5, 12, 22, 0.95);
            --border-color: rgba(0, 242, 255, 0.4);
            --text-main: #e0f7fa;
            --error: #ff2a2a;
            --success: #00ff88;
        }

        * { box-sizing: border-box; outline: none; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; padding: 0;
            font-family: 'Rajdhani', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            position: relative;
        }

        /* --- 2. PRELOADER STYLES (FROM ORIGINAL CODE) --- */
        #preloader { position: fixed; inset: 0; background: #020408; z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 0.8s ease-out, visibility 0.8s; }
        .loader-wrapper { position: relative; width: 120px; height: 120px; margin-bottom: 30px; }
        .loader-ring { position: absolute; inset: 0; border: 3px solid transparent; border-top-color: var(--primary-neon); border-right-color: var(--secondary-neon); border-radius: 50%; animation: spin 1.5s linear infinite; box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); }
        .loader-logo { position: absolute; inset: 15px; border-radius: 50%; background: url('https://cdn-icons-png.flaticon.com/512/2966/2966487.png') no-repeat center/cover; animation: pulseLoader 2s infinite ease-in-out; filter: drop-shadow(0 0 10px var(--primary-neon)); }
        .loader-title { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; letter-spacing: 4px; background: linear-gradient(90deg, #fff, var(--primary-neon)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 5px; }
        .progress-bar { width: 0%; height: 4px; background: var(--primary-neon); box-shadow: 0 0 10px var(--primary-neon); transition: width 0.3s; border-radius: 2px; width: 200px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes pulseLoader { 0%, 100% { transform: scale(0.9); opacity: 0.8; } 50% { transform: scale(1); opacity: 1; } }

        /* --- 3. BACKGROUND ANIMATION --- */
        #bio-background {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            overflow: hidden; 
            background: radial-gradient(circle at center, #0f1c2e 0%, #000000 90%);
        }
        .bio-symbol {
            position: absolute; color: var(--primary-neon); opacity: 0;
            animation: floatOrganic linear infinite; pointer-events: none;
            filter: blur(1px);
        }
        @keyframes floatOrganic {
            0% { transform: translate(0, 110vh) rotate(0deg) scale(0.5); opacity: 0; }
            10% { opacity: 0.15; }
            50% { transform: translate(20px, 50vh) rotate(180deg) scale(1); opacity: 0.25; }
            90% { opacity: 0.15; }
            100% { transform: translate(-20px, -10vh) rotate(360deg) scale(0.5); opacity: 0; }
        }

        /* --- 4. HEADER --- */
        header {
            position: absolute; top: 0; width: 100%; padding: 15px 40px;
            display: flex; justify-content: space-between; align-items: center; z-index: 10;
            background: linear-gradient(to bottom, rgba(2, 4, 8, 0.95), transparent);
            border-bottom: 1px solid rgba(0, 242, 255, 0.1);
        }
        .header-left { display: flex; align-items: center; gap: 20px; }
        .brand { display: flex; align-items: center; gap: 15px; }
        .brand-logo { width: 45px; height: 45px; border: 2px solid var(--primary-neon); border-radius: 50%; box-shadow: 0 0 15px var(--primary-neon); animation: pulseLogo 3s infinite; }
        @keyframes pulseLogo { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .brand-text h1 { font-family: 'Orbitron', sans-serif; font-size: 1.2rem; margin: 0; letter-spacing: 2px; background: linear-gradient(90deg, #fff, var(--primary-neon)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
        .brand-text p { margin: 0; font-size: 0.7rem; color: var(--primary-neon); opacity: 0.8; letter-spacing: 2px; }
        .live-clock { display: flex; flex-direction: column; align-items: flex-start; border-left: 2px solid rgba(0, 242, 255, 0.3); padding-left: 15px; font-family: 'Orbitron', sans-serif; }
        .clock-time { font-size: 1.1rem; font-weight: bold; color: var(--primary-neon); }
        .clock-date { font-size: 0.7rem; color: #aaa; letter-spacing: 1px; }
        .controls { display: flex; gap: 15px; align-items: center; }
        .status-badge { display: flex; align-items: center; gap: 10px; background: rgba(0, 242, 255, 0.05); border: 1px solid rgba(0, 242, 255, 0.2); padding: 5px 12px; border-radius: 20px; }
        .status-led { width: 8px; height: 8px; border-radius: 50%; background-color: var(--success); box-shadow: 0 0 10px var(--success); }
        .status-text { font-family: 'Orbitron', sans-serif; font-size: 0.75rem; color: var(--success); font-weight: bold; }
        .status-badge.offline .status-led { background-color: var(--error); box-shadow: 0 0 10px var(--error); }
        .status-badge.offline .status-text { color: var(--error); }
        .icon-btn { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: var(--primary-neon); width: 38px; height: 38px; border-radius: 50%; cursor: pointer; display: flex; justify-content: center; align-items: center; transition: 0.3s; }
        .icon-btn:hover { background: var(--primary-neon); color: #000; box-shadow: 0 0 15px var(--primary-neon); }
        .icon-btn:active { transform: scale(0.95); }
        select.lang-select { background: rgba(0,0,0,0.6); color: #fff; border: 1px solid var(--primary-neon); padding: 5px 12px; border-radius: 20px; font-family: 'Rajdhani', sans-serif; cursor: pointer; }
        select.lang-select option { background: #050b14; }

        /* --- 5. LOGIN HUD & INPUTS --- */
        .main-container { position: relative; z-index: 5; width: 100%; max-width: 480px; padding: 20px; }
        .hud-card { background: var(--glass-panel); backdrop-filter: blur(25px); border: 1px solid var(--border-color); border-radius: 20px; padding: 45px 35px; text-align: center; position: relative; box-shadow: 0 0 30px rgba(0, 242, 255, 0.15); animation: cardBreath 4s infinite ease-in-out; }
        @keyframes cardBreath { 0%, 100% { border-color: rgba(0, 242, 255, 0.3); } 50% { border-color: rgba(0, 242, 255, 0.6); } }
        .card-header h2 { font-family: 'Orbitron', sans-serif; font-size: 1.6rem; margin: 0; text-shadow: 0 0 15px var(--primary-neon); letter-spacing: 2px; }
        .energy-divider { height: 2px; width: 80%; margin: 20px auto 40px; background: radial-gradient(circle, var(--primary-neon) 0%, rgba(0,242,255,0) 90%); box-shadow: 0 0 10px var(--primary-neon); opacity: 0.8; }

        /* ITI Library Styling */
        .iti { width: 100%; margin-bottom: 15px; }
        .iti__country-list { background-color: #0b101a; color: #fff; border: 1px solid var(--primary-neon); z-index: 2000; text-align: left; }
        .iti__country:hover { background-color: rgba(0, 242, 255, 0.1); }
        .iti__selected-dial-code { color: #fff; font-family: 'Orbitron'; margin-left: 5px; }

        .input-field { width: 100%; background: rgba(0, 0, 0, 0.5); border: 2px solid rgba(255, 255, 255, 0.1); padding: 15px; font-size: 1.5rem; color: #fff; border-radius: 12px; font-family: 'Orbitron', sans-serif; transition: 0.3s; text-align: center; }
        .input-field:focus { border-color: var(--primary-neon); box-shadow: 0 0 25px rgba(0, 242, 255, 0.3); }
        .input-field.valid { border-color: var(--success); box-shadow: 0 0 15px rgba(0, 255, 136, 0.3); }
        .input-field.invalid { border-color: var(--error); box-shadow: 0 0 15px rgba(255, 42, 42, 0.3); }

        .remember-me { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 25px; cursor: pointer; color: #aaa; font-size: 0.9rem; }
        .remember-me input { cursor: pointer; accent-color: var(--primary-neon); transform: scale(1.2); }

        .action-btn { width: 100%; padding: 15px; border: none; border-radius: 50px; background: linear-gradient(90deg, rgba(0,242,255,0.05), rgba(0,242,255,0.15)); border: 1px solid var(--primary-neon); color: #fff; font-family: 'Orbitron', sans-serif; font-size: 1.1rem; letter-spacing: 2px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; min-height: 55px; }
        .action-btn:hover:not(:disabled) { background: var(--primary-neon); color: #000; box-shadow: 0 0 40px var(--primary-neon); }
        .action-btn:active:not(:disabled) { transform: scale(0.98); }
        .action-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        #success-view { display: none; flex-direction: column; align-items: center; animation: fadeIn 0.5s; }
        .dashboard-btn { background: var(--success); color: #000; border: none; font-weight: 700; }
        .success-icon { font-size: 3.5rem; color: var(--success); margin-bottom: 15px; animation: popIn 0.5s; }
        @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .footer { position: absolute; bottom: 15px; width: 100%; text-align: center; font-size: 0.75rem; color: rgba(255,255,255,0.3); letter-spacing: 1px; padding: 0 20px; }

        /* --- 6. MODALS (Updated) --- */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 3000; display: none; justify-content: center; align-items: center; backdrop-filter: blur(10px); opacity: 0; transition: 0.3s; overflow-y: auto; }
        .modal-overlay.active { opacity: 1; display: flex; }
        .modal-box { background: #080d16; border: 1px solid var(--primary-neon); width: 90%; max-width: 750px; padding: 40px; border-radius: 15px; box-shadow: 0 0 60px rgba(0, 242, 255, 0.15); position: relative; max-height: 90vh; overflow-y: auto; transform: scale(0.9); transition: 0.3s; margin: 20px; }
        .modal-overlay.active .modal-box { transform: scale(1); }
        .close-modal { position: absolute; top: 20px; right: 20px; color: #fff; background: none; border: none; font-size: 1.5rem; cursor: pointer; transition: 0.3s; z-index: 10; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; }
        .close-modal:hover { color: var(--error); transform: rotate(90deg); }

        /* Consent Text Area */
        .consent-text { text-align: left; font-size: 0.95rem; line-height: 1.7; color: #ccc; margin-bottom: 25px; border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; background: rgba(0,0,0,0.3); max-height: 400px; overflow-y: auto; }
        body.rtl .consent-text { text-align: right; }
        .consent-text b { color: var(--primary-neon); display: block; margin-top: 15px; margin-bottom: 5px; font-size: 1rem; }
        .consent-check { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: #fff; margin-bottom: 25px; cursor: pointer; }

        /* Team Info */
        .logos-row { display: flex; justify-content: center; gap: 25px; margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px; }
        .logos-row img { height: 60px; filter: drop-shadow(0 0 5px rgba(255,255,255,0.5)); transition: 0.3s; }
        .modal-section { margin-bottom: 20px; text-align: left; }
        .modal-section h3 { color: var(--primary-neon); margin: 0 0 8px 0; font-size: 1.1rem; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 5px; }
        .modal-section p { font-size: 0.9rem; color: #ccc; line-height: 1.6; margin: 0; }
        .team-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 10px; }
        .team-member { background: rgba(255,255,255,0.03); padding: 10px 15px; border-radius: 8px; font-size: 0.9rem; display: flex; align-items: center; gap: 10px; border: 1px solid transparent; transition: 0.2s; }
        .team-member:hover { border-color: var(--secondary-neon); background: rgba(112, 0, 255, 0.15); transform: translateX(5px); }
        .team-member i { color: var(--secondary-neon); font-size: 1rem; }

        .toast-container { position: fixed; top: 100px; right: 20px; z-index: 4000; }
        .toast { background: rgba(5, 11, 20, 0.95); border-left: 4px solid var(--success); padding: 15px 25px; margin-bottom: 10px; border-radius: 5px; color: #fff; animation: slideIn 0.4s ease; display: flex; align-items: center; gap: 10px; }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        .shake { animation: shake 0.4s; border-color: var(--error) !important; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }

        /* --- 7. MOBILE RESPONSIVE --- */
        @media (max-width: 768px) {
            header {
                padding: 10px 15px;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .header-left {
                gap: 10px;
                flex: 1;
            }
            
            .brand {
                gap: 8px;
            }
            
            .brand-logo {
                width: 35px;
                height: 35px;
            }
            
            .brand-text h1 {
                font-size: 0.9rem;
                letter-spacing: 1px;
            }
            
            .brand-text p {
                font-size: 0.55rem;
            }
            
            .live-clock {
                display: none;
            }
            
            .controls {
                gap: 8px;
            }
            
            .status-badge {
                padding: 4px 8px;
                gap: 6px;
            }
            
            .status-led {
                width: 6px;
                height: 6px;
            }
            
            .status-text {
                font-size: 0.65rem;
            }
            
            .icon-btn {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }
            
            select.lang-select {
                padding: 4px 8px;
                font-size: 0.8rem;
            }
            
            .main-container {
                padding: 15px;
                max-width: 100%;
            }
            
            .hud-card {
                padding: 30px 20px;
                border-radius: 15px;
            }
            
            .card-header h2 {
                font-size: 1.3rem;
                letter-spacing: 1px;
            }
            
            .energy-divider {
                margin: 15px auto 30px;
            }
            
            .input-field {
                font-size: 1.2rem;
                padding: 12px;
            }
            
            .action-btn {
                font-size: 1rem;
                padding: 13px;
                min-height: 50px;
                letter-spacing: 1px;
            }
            
            .remember-me {
                font-size: 0.85rem;
                margin-bottom: 20px;
            }
            
            .success-icon {
                font-size: 2.8rem;
            }
            
            .footer {
                font-size: 0.65rem;
                bottom: 10px;
                padding: 0 15px;
            }
            
            /* Modal Responsive */
            .modal-box {
                padding: 25px 20px;
                width: 95%;
                max-height: 85vh;
                margin: 10px;
            }
            
            .close-modal {
                top: 15px;
                right: 15px;
                font-size: 1.3rem;
            }
            
            .logos-row {
                gap: 15px;
                flex-wrap: wrap;
            }
            
            .logos-row img {
                height: 45px;
            }
            
            .modal-section h3 {
                font-size: 1rem;
            }
            
            .modal-section p {
                font-size: 0.85rem;
            }
            
            .team-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .team-member {
                padding: 8px 12px;
                font-size: 0.85rem;
            }
            
            .consent-text {
                font-size: 0.85rem;
                padding: 12px;
                max-height: 300px;
            }
            
            .consent-text b {
                font-size: 0.95rem;
            }
            
            .consent-check {
                font-size: 0.85rem;
            }
            
            .toast-container {
                top: 70px;
                right: 10px;
                left: 10px;
            }
            
            .toast {
                padding: 12px 15px;
                font-size: 0.9rem;
            }
            
            /* Preloader Mobile */
            .loader-wrapper {
                width: 100px;
                height: 100px;
            }
            
            .loader-title {
                font-size: 1.4rem;
                letter-spacing: 2px;
            }
            
            .progress-bar {
                width: 150px;
            }
        }
        
        @media (max-width: 480px) {
            .brand-text h1 {
                font-size: 0.8rem;
            }
            
            .brand-text p {
                display: none;
            }
            
            .card-header h2 {
                font-size: 1.1rem;
            }
            
            .input-field {
                font-size: 1.1rem;
            }
            
            .action-btn {
                font-size: 0.9rem;
            }
            
            .health-ticker {
                height: 28px;
            }
            
            .ticker-content {
                font-size: 0.75rem;
            }
            
            /* --- 9. SYSTEM STATUS TERMINAL (UPDATED) --- */
            .system-terminal {
                position: fixed;
                bottom: 85px;
                left: 20px;
                width: 320px;
                background: rgba(2, 8, 15, 0.75);
                backdrop-filter: blur(15px);
                border: 1px solid rgba(0, 242, 255, 0.3);
                border-radius: 8px;
                padding: 15px;
                font-family: 'Courier New', monospace;
                font-size: 0.75rem;
                color: var(--primary-neon);
                box-shadow: 0 0 25px rgba(0, 242, 255, 0.15);
                z-index: 99;
                height: 200px;
                overflow: hidden;
                display: flex;
                flex-direction: column;
            }
            
            .terminal-header {
                margin-bottom: 6px;
                padding-bottom: 4px;
                font-size: 0.55rem;
                gap: 4px;
            }
            
            .terminal-dots {
                gap: 2px;
            }
            
            .terminal-dot {
                width: 5px;
                height: 5px;
            }
            
            .terminal-line {
                margin: 2px 0;
                line-height: 1.4;
                font-size: 0.6rem;
            }
            
            .terminal-cursor {
                width: 5px;
                height: 8px;
            }
            
            .health-ticker {
                bottom: 30px;
                height: 30px;
            }
            
            .ticker-content {
                font-size: 0.8rem;
            }
            
            .ticker-item {
                padding: 0 25px;
            }
            
            .footer {
                font-size: 0.65rem;
                bottom: 10px;
                padding: 0 15px;
            }
        }
        
        /* Landscape Mode on Mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            header {
                position: relative;
                padding: 8px 15px;
            }
            
            .main-container {
                padding: 10px;
                margin-top: 10px;
            }
            
            .hud-card {
                padding: 20px 15px;
            }
            
            .card-header h2 {
                font-size: 1.1rem;
            }
            
            .energy-divider {
                margin: 10px auto 20px;
            }
            
            .footer {
                position: relative;
                margin-top: 15px;
            }
            
            .modal-box {
                max-height: 95vh;
                padding: 20px 15px;
            }
            
            .system-terminal {
                display: none;
            }
            
            .health-ticker {
                bottom: 25px;
                height: 25px;
            }
        }
        
        /* UPDATED: إخفاء في الشاشات الصغيرة جداً إذا لزم الأمر */
        @media (max-width: 360px) {
            .system-terminal {
                width: 130px;
                height: 100px;
                padding: 5px;
                font-size: 0.5rem;
            }
            
            .terminal-header {
                font-size: 0.45rem;
                margin-bottom: 4px;
            }
            
            .terminal-line {
                font-size: 0.5rem;
            }
        }
    </style>
</head>

<body>

    <div id="preloader">
        <div class="loader-wrapper">
            <div class="loader-ring"></div>
            <div class="loader-logo"></div>
        </div>
        <div class="loader-title">BIOSCAN ATM</div>
        <div class="loader-status" id="loaderStatus">Initializing Biosensors...</div>
        <div class="progress-bar"></div>
    </div>

    <div id="bio-background"></div>

    <header>
        <div class="header-left">
            <div class="brand">
                <img src="https://cdn-icons-png.flaticon.com/512/2966/2966487.png" class="brand-logo" alt="Logo">
                <div class="brand-text">
                    <h1>Bioscan ATM</h1>
                    <p>STATION ONLINE</p>
                </div>
            </div>
            <div class="live-clock">
                <div class="clock-time" id="clockTime">00:00:00</div>
                <div class="clock-date" id="clockDate">--/--/----</div>
            </div>
        </div>
        <div class="controls">
            <div class="status-badge pulse-active" id="statusBadge"><div class="status-led" id="connectionLed"></div><div class="status-text" id="connectionText">ONLINE</div></div>
            <button class="icon-btn" onclick="toggleModal('aboutModal', true)" title="Info"><i class="fas fa-info"></i></button>
            <select class="lang-select" id="language_select" onchange="changeLanguage()">
                <option value="en">EN</option>
                <option value="ar">AR</option>
            </select>
        </div>
    </header>

    <div class="main-container">
        <div class="hud-card">
            <div class="card-header">
                <h2 id="ui-title">USER LOGIN</h2>
                <div class="energy-divider"></div>
            </div>

            <div id="login-view">
                <div class="input-wrapper">
                    <input type="tel" id="userId" class="input-field" placeholder="1xxxxxxxxx" onkeyup="validateLive()">
                    <div class="error-msg" id="helper-text"></div>
                </div>

                <label class="remember-me">
                    <input type="checkbox" id="remCheck"> <span id="lblRem">Remember Me</span>
                </label>

                <button class="action-btn" id="loginBtn" onclick="processLogin()">
                    <i class="fas fa-fingerprint"></i> <span id="btn-text">INITIALIZE SCAN</span>
                </button>
            </div>

            <div id="recaptcha-container"></div>

            <div id="success-view">
                <div class="success-icon"><i class="fas fa-check-circle"></i></div>
                <h3 id="success-msg" style="color: var(--success);">Access Granted</h3>
                <p id="welcome-user-msg" style="color: #aaa; margin-bottom: 25px;">Verified</p>
                <button class="action-btn dashboard-btn" onclick="goToDashboard()">
                    <i class="fas fa-chart-pie"></i> <span id="dash-btn-text">OPEN DASHBOARD</span>
                </button>
                <button class="icon-btn" onclick="resetView()" style="margin-top: 20px; width: 40px; height: 40px; margin-left: auto; margin-right: auto; border-color: #555; color: #555;"><i class="fas fa-redo"></i></button>
            </div>
        </div>
    </div>

    <div class="footer">Graduation Project 2026 | Zagazig University - Faculty of Engineering</div>
    
    <!-- UPDATED: Medical News & Health Tips Ticker -->
    <div class="health-ticker">
        <div class="ticker-content" id="tickerContent">
            <span class="ticker-item"><i class="fas fa-heart-pulse"></i> نصيحة طبية: اشرب 8 أكواب ماء يومياً للحفاظ على صحة الكلى</span>
            <span class="ticker-item"><i class="fas fa-apple-whole"></i> Medical Tip: Eating fruits rich in Vitamin C boosts immunity</span>
            <span class="ticker-item"><i class="fas fa-bed"></i> تحذير: قلة النوم تزيد خطر الإصابة بأمراض القلب بنسبة 48%</span>
            <span class="ticker-item"><i class="fas fa-walking"></i> Health Alert: 30 minutes of daily exercise reduces diabetes risk</span>
            <span class="ticker-item"><i class="fas fa-brain"></i> نصيحة: القراءة 15 دقيقة يومياً تحسن الذاكرة وتقلل التوتر</span>
            <span class="ticker-item"><i class="fas fa-sun"></i> Medical News: Vitamin D deficiency linked to chronic fatigue</span>
            <span class="ticker-item"><i class="fas fa-lungs"></i> تنبيه صحي: التدخين يقلل من كفاءة الرئتين بنسبة 50%</span>
            <span class="ticker-item"><i class="fas fa-carrot"></i> Nutrition Tip: Dark leafy greens help lower blood pressure</span>
            <span class="ticker-item"><i class="fas fa-heartbeat"></i> نصيحة: فحص الضغط شهرياً يقي من السكتات الدماغية</span>
            <span class="ticker-item"><i class="fas fa-mobile-screen"></i> Health Warning: Blue light exposure before sleep disrupts circadian rhythm</span>
            <!-- Duplicate for seamless loop -->
            <span class="ticker-item"><i class="fas fa-heart-pulse"></i> نصيحة طبية: اشرب 8 أكواب ماء يومياً للحفاظ على صحة الكلى</span>
            <span class="ticker-item"><i class="fas fa-apple-whole"></i> Medical Tip: Eating fruits rich in Vitamin C boosts immunity</span>
            <span class="ticker-item"><i class="fas fa-bed"></i> تحذير: قلة النوم تزيد خطر الإصابة بأمراض القلب بنسبة 48%</span>
            <span class="ticker-item"><i class="fas fa-walking"></i> Health Alert: 30 minutes of daily exercise reduces diabetes risk</span>
            <span class="ticker-item"><i class="fas fa-brain"></i> نصيحة: القراءة 15 دقيقة يومياً تحسن الذاكرة وتقلل التوتر</span>
            <span class="ticker-item"><i class="fas fa-sun"></i> Medical News: Vitamin D deficiency linked to chronic fatigue</span>
            <span class="ticker-item"><i class="fas fa-lungs"></i> تنبيه صحي: التدخين يقلل من كفاءة الرئتين بنسبة 50%</span>
            <span class="ticker-item"><i class="fas fa-carrot"></i> Nutrition Tip: Dark leafy greens help lower blood pressure</span>
            <span class="ticker-item"><i class="fas fa-heartbeat"></i> نصيحة: فحص الضغط شهرياً يقي من السكتات الدماغية</span>
            <span class="ticker-item"><i class="fas fa-mobile-screen"></i> Health Warning: Blue light exposure before sleep disrupts circadian rhythm</span>
        </div>
    </div>
    
    <!-- NEW: System Status Terminal -->
    <div class="system-terminal" id="systemTerminal">
        <div class="terminal-header">
            <div class="terminal-dots">
                <div class="terminal-dot"></div>
                <div class="terminal-dot"></div>
                <div class="terminal-dot"></div>
            </div>
            <span>SYS.MONITOR</span>
        </div>
        <div id="terminalOutput"></div>
    </div>
    
    <div class="toast-container" id="toastContainer"></div>

    <div class="modal-overlay" id="aboutModal">
        <div class="modal-box">
            <button class="close-modal" onclick="toggleModal('aboutModal', false)"><i class="fas fa-times"></i></button>
            <div class="logos-row"><img src="zagazig_logo.png" alt="Zag Univ"><img src="eng_logo.png" alt="Eng Fac"></div>
            <h2 id="modal-project-name" style="color:#fff; margin-top:0; text-align: center;">Bioscan ATM</h2>
            <div class="modal-section">
                <h3><i class="fas fa-bullseye"></i> <span id="mission-title">Mission</span></h3>
                <p id="mission-text">Empowering communities with instant, hospital-grade health diagnostics via IoT.</p>
            </div>
            <div class="modal-section">
                <h3><i class="fas fa-eye"></i> <span id="vision-title">Vision</span></h3>
                <p id="vision-text">A world where proactive health monitoring is seamless and accessible to everyone everywhere.</p>
            </div>
            <div class="modal-section">
                <h3><i class="fas fa-users"></i> <span id="team-title">The Team</span></h3>
                <div class="team-grid">
                    <div class="team-member"><i class="fas fa-user-tie"></i> <span>Mohsen M. Elsayed</span></div>
                    <div class="team-member"><i class="fas fa-user-tie"></i> <span>Mohamed A. Rashad</span></div>
                    <div class="team-member"><i class="fas fa-user-tie"></i> <span>Mohamed A. Karam</span></div>
                    <div class="team-member"><i class="fas fa-user-tie"></i> <span>Hossam H. Abdel Aziz</span></div>
                    <div class="team-member"><i class="fas fa-user-nurse"></i> <span>Lamia I. Mohammed</span></div>
                    <div class="team-member"><i class="fas fa-user-tie"></i> <span>Karim H. Mansour</span></div>
                    <div class="team-member"><i class="fas fa-user-nurse"></i> <span>Fatema M. Saad</span></div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="consentModal">
        <div class="modal-box">
            <button class="close-modal" onclick="toggleModal('consentModal', false)"><i class="fas fa-times"></i></button>
            <h2 id="con-title" style="color:var(--primary-neon); margin-top:0; font-family:'Orbitron';">Terms & Privacy</h2>
            <div class="energy-divider" style="margin: 15px auto;"></div>
            <div class="consent-text" id="con-body">
                </div>
            <label class="consent-check">
                <input type="checkbox" id="agreeCheck" onchange="toggleConsentBtn()">
                <span id="lblAgree">I have read and agree to the terms.</span>
            </label>
            <button class="action-btn" id="btnSendCode" onclick="proceedToVerification()" disabled style="opacity:0.5;">
                <span id="lblSend">AGREE & SEND SMS</span>
            </button>
        </div>
    </div>

    <div class="modal-overlay" id="verifyModal">
        <div class="modal-box" style="text-align:center;">
            <button class="close-modal" onclick="toggleModal('verifyModal', false)"><i class="fas fa-times"></i></button>
            <div style="font-size:3rem; color:var(--primary-neon); margin-bottom:15px;"><i class="fas fa-mobile-alt"></i></div>
            <h2 id="ver-title" style="color:#fff; margin:0;">Verify Identity</h2>
            <p id="ver-sub" style="color:#aaa; font-size:0.9rem; margin-bottom:20px;">Code sent via SMS</p>
            <input type="number" id="codeInput" class="input-field" placeholder="6-Digit Code" style="margin-bottom:15px;">
            <input type="text" id="nameInput" class="input-field" placeholder="Full Name" style="margin-bottom:20px;">
            <button class="action-btn" onclick="verifyAndRegister()"><span id="lblVerify">VERIFY & REGISTER</span></button>
        </div>
    </div>

    <script>
        // --- 1. FIREBASE CONFIG ---
        const firebaseConfig = {
            apiKey: "AIzaSyAOwMQhsRM2PdD_FLjW_8Oi1WlFS3EO5pY",
            authDomain: "smart-a76a0.firebaseapp.com",
            databaseURL: "https://smart-a76a0-default-rtdb.firebaseio.com",
            projectId: "smart-a76a0",
            messagingSenderId: "343693501983",
            appId: "1:343693501983:web:10ea3fce9d990a2455172a"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const auth = firebase.auth();

        // --- GLOBAL VARIABLES ---
        let welcomePlayed = false;

        // أرقام التيست في Firebase (ضع أرقامك وكودها هنا)
        // Example:
        // '+201234567890': '123456'
        const testPhones = {
            // '+201234567890': '123456',
        };
        let isTestPhone = false;

        // --- 2. RESTORED PRELOADER JS (Random Increments) ---
        function startPreloader() {
            const bar = document.querySelector('.progress-bar');
            let w = 0;
            const iv = setInterval(() => {
                w += Math.random() * 15; if(w > 100) w = 100;
                bar.style.width = w + '%';
                if(w===100) {
                    clearInterval(iv);
                    setTimeout(() => { 
                        document.getElementById('preloader').style.opacity = '0'; 
                        setTimeout(() => { 
                            document.getElementById('preloader').style.display='none'; 
                            playWelcomeMessage();
                        }, 800); 
                    }, 500);
                }
            }, 100);
        }

        // --- 3. INPUT SETUP ---
        const phoneInput = document.querySelector("#userId");
        const iti = window.intlTelInput(phoneInput, {
            separateDialCode: true,
            preferredCountries: ["eg", "sa", "ae"],
            utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",
        });

        window.onload = () => {
            window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', { 'size': 'invisible' });
            createBioBackground(); startPreloader(); startClock(); updateTexts(); checkConnection();
            const saved = localStorage.getItem("saved_phone");
            if(saved) { iti.setNumber(saved); document.getElementById('remCheck').checked = true; validateLive(); }
            document.addEventListener('click', () => playWelcomeMessage(), { once: true });
            
            // NEW: Initialize terminal animation
            initializeTerminal();
        };

        function validateLive() {
            if (iti.isValidNumber()) { phoneInput.classList.add("valid"); phoneInput.classList.remove("invalid"); } 
            else { phoneInput.classList.remove("valid"); if(phoneInput.value.length > 3) phoneInput.classList.add("invalid"); }
        }

        // --- 4. MAIN LOGIC ---
        let currentFullNumber = "";
        let confirmationResult = null;

        function processLogin() {
            if (!iti.isValidNumber()) { phoneInput.classList.add("shake"); setTimeout(() => phoneInput.classList.remove("shake"), 400); return; }
            currentFullNumber = iti.getNumber();
            isTestPhone = !!testPhones[currentFullNumber];
            const loginBtn = document.getElementById("loginBtn");
            loginBtn.disabled = true;
            loginBtn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Checking Database...';
            
            auth.signInAnonymously().then(() => {
                database.ref('PatientData/' + currentFullNumber).once('value').then(snapshot => {
                    if (snapshot.exists()) { completeLogin(currentFullNumber); } 
                    else { 
                        loginBtn.disabled = false;
                        loginBtn.innerHTML = '<i class="fas fa-fingerprint"></i> ' + txt[currentLang].btnScan; 
                        toggleModal('consentModal', true); 
                    }
                }).catch(e => {
                    loginBtn.disabled = false;
                    loginBtn.innerHTML = '<i class="fas fa-fingerprint"></i> ' + txt[currentLang].btnScan;
                    showToast("Database Error", "error");
                    console.error(e);
                });
            }).catch(e => { 
                loginBtn.disabled = false;
                loginBtn.innerHTML = '<i class="fas fa-fingerprint"></i> ' + txt[currentLang].btnScan;
                toggleModal('consentModal', true);
                console.error(e);
            });
        }

        function proceedToVerification() {
            toggleModal('consentModal', false);
            const btnSendCode = document.getElementById('btnSendCode');
            btnSendCode.disabled = true;
            btnSendCode.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> ' + (currentLang === 'ar' ? 'جاري الإرسال...' : 'Sending...');

            // في حالة أرقام التيست: لا نستدعي SMS API، فقط نُظهر مودال التحقق ونستخدم الكود الثابت
            if (isTestPhone) {
                window.confirmationResult = null; // تأكيد أننا في وضع تيست
                toggleModal('verifyModal', true);
                btnSendCode.disabled = false;
                btnSendCode.innerHTML = '<span id="lblSend">' + txt[currentLang].lblSend + '</span>';
                showToast(currentLang === 'ar' ? "تم إرسال كود تجريبي (بدون خصم من الكوتة)" : "Test OTP 'sent' (no real SMS).", "success");
                return;
            }
            
            auth.signInWithPhoneNumber(currentFullNumber, window.recaptchaVerifier).then(result => {
                window.confirmationResult = result; 
                toggleModal('verifyModal', true);
                btnSendCode.disabled = false;
                btnSendCode.innerHTML = '<span id="lblSend">' + txt[currentLang].lblSend + '</span>';
            }).catch(e => { 
                btnSendCode.disabled = false;
                btnSendCode.innerHTML = '<span id="lblSend">' + txt[currentLang].lblSend + '</span>';
                showToast(currentLang === 'ar' ? "خطأ في إرسال الرسالة" : "SMS Error: Check Console", "error"); 
                console.error(e); 
            });
        }

        function verifyAndRegister() {
            const code = document.getElementById('codeInput').value;
            const name = document.getElementById('nameInput').value.trim();
            if(name.length < 3) {
                showToast(currentLang === 'ar' ? "أدخل الاسم" : "Enter Name", "error");
                return;
            }
            if(!code || code.length !== 6) {
                showToast(currentLang === 'ar' ? "أدخل الرمز المكون من 6 أرقام" : "Enter 6-digit code", "error");
                return;
            }

            // حالة أرقام التيست: نتحقق بالكود الثابت من الماب فقط بدون Firebase Phone Auth
            if (isTestPhone) {
                const expectedCode = testPhones[currentFullNumber];
                if (!expectedCode || code !== expectedCode) {
                    showToast(currentLang === 'ar' ? "رمز غير صحيح (وضع تيست)" : "Invalid test code", "error");
                    return;
                }
                database.ref('PatientData/' + currentFullNumber).set({ FullName: name, Phone: currentFullNumber, RegistrationDate: new Date().toLocaleString(), SensorData: "No measurement recorded yet" })
                .then(() => { toggleModal('verifyModal', false); completeLogin(currentFullNumber); })
                .catch(e => {
                    showToast(currentLang === 'ar' ? "خطأ في حفظ البيانات" : "Database Save Error", "error");
                    console.error(e);
                });
                return;
            }

            if(!window.confirmationResult) {
                showToast(currentLang === 'ar' ? "خطأ في التحقق" : "Verification Error", "error");
                return;
            }
            window.confirmationResult.confirm(code).then(() => {
                database.ref('PatientData/' + currentFullNumber).set({ FullName: name, Phone: currentFullNumber, RegistrationDate: new Date().toLocaleString(), SensorData: "No measurement recorded yet" })
                .then(() => { toggleModal('verifyModal', false); completeLogin(currentFullNumber); })
                .catch(e => {
                    showToast(currentLang === 'ar' ? "خطأ في حفظ البيانات" : "Database Save Error", "error");
                    console.error(e);
                });
            }).catch(e => {
                showToast(currentLang === 'ar' ? "رمز غير صحيح" : "Invalid Code", "error");
                console.error(e);
            });
        }

        function completeLogin(number) {
            if(document.getElementById('remCheck').checked) localStorage.setItem("saved_phone", number);
            else localStorage.removeItem("saved_phone");
            localStorage.setItem("selectedUserId", number);
            document.getElementById("login-view").style.display = "none";
            document.getElementById("success-view").style.display = "flex";
            document.getElementById("welcome-user-msg").innerText = number;
            showToast(txt[currentLang].toastLogin, "success");
        }

        function toggleConsentBtn() {
            const btn = document.getElementById('btnSendCode');
            const chk = document.getElementById('agreeCheck');
            btn.disabled = !chk.checked;
            btn.style.opacity = chk.checked ? "1" : "0.5";
        }

        // --- 5. UI CORE ---
        function playWelcomeMessage() {
            if (welcomePlayed) return;
            if ('speechSynthesis' in window) {
                const enMsg = new SpeechSynthesisUtterance("Welcome to Bioscan ATM Station. Please enter your mobile number.");
                enMsg.lang = 'en-US'; enMsg.rate = 0.9;
                const arMsg = new SpeechSynthesisUtterance("مرحباً بكم في محطة بايوسكان. يرجى إدخال رقم الهاتف للمتابعة.");
                arMsg.lang = 'ar-SA'; arMsg.rate = 0.85;
                window.speechSynthesis.speak(enMsg); window.speechSynthesis.speak(arMsg);
                welcomePlayed = true;
            }
        }

        function createBioBackground() {
            const container = document.getElementById('bio-background');
            const icons = ['fa-dna', 'fa-heartbeat', 'fa-notes-medical', 'fa-pills', 'fa-virus', 'fa-microscope', 'fa-user-md', 'fa-syringe', 'fa-lungs', 'fa-brain'];
            for (let i = 0; i < 35; i++) {
                const el = document.createElement('i');
                el.classList.add('fas', icons[Math.floor(Math.random() * icons.length)], 'bio-symbol');
                el.style.left = Math.random() * 100 + 'vw';
                el.style.fontSize = (Math.random() * 2 + 0.5) + 'rem';
                el.style.animationDuration = (Math.random() * 20 + 15) + 's';
                el.style.animationDelay = (Math.random() * 10) + 's';
                container.appendChild(el);
            }
        }

        function startClock() {
            setInterval(() => {
                const now = new Date(); const loc = currentLang === 'ar' ? 'ar-EG' : 'en-US';
                document.getElementById('clockTime').innerText = now.toLocaleTimeString(loc, {hour12: false});
                document.getElementById('clockDate').innerText = now.toLocaleDateString(loc, {weekday:'short', day:'numeric', month:'short'});
            }, 1000);
        }

        function checkConnection() {
            setInterval(async () => {
                const badge = document.getElementById('statusBadge');
                try {
                    await fetch("https://www.google.com/favicon.ico?" + new Date().getTime(), { mode: "no-cors" });
                    badge.classList.remove('offline');
                } catch (e) { badge.classList.add('offline'); }
            }, 3000);
        }

        let currentLang = localStorage.getItem("language") || "en";
        function changeLanguage() { currentLang = document.getElementById("language_select").value; localStorage.setItem("language", currentLang); updateTexts(); }

        const txt = {
            en: { 
                uiTitle: "USER LOGIN", ph: "1xxxxxxxxx", btnScan: "INITIALIZE SCAN", success: "Access Granted", toastLogin: "Verified",
                conTitle: "Terms of Use & Privacy",
                conBody: `<b>Terms of Use & Data Privacy Agreement</b><br><br><b>1. Medical Guidance Only:</b> This system is intended for informational and guidance purposes only. It is NOT a substitute for professional medical diagnosis or treatment.<br><br><b>2. Emergency Cases:</b> In case of a medical emergency, please contact your local emergency services or go to the nearest hospital immediately. Do not rely on this system for life-critical decisions.<br><br><b>3. Data Security:</b> Your vital signs and personal data are stored securely on our cloud servers (Firebase). By proceeding, you consent to this data processing.<br><br><b>4. AI Analysis:</b> AI-generated insights are based on statistical trends and should be verified by a certified healthcare professional.`,
                lblAgree: "I have read and agree to the terms.", lblSend: "AGREE & PROCEED",
                projName: "Bioscan ATM", sub: "Graduation Project 2026", missionT: "Mission", mission: "Empowering communities with instant, hospital-grade health diagnostics via IoT.",
                visionT: "Vision", vision: "A world where proactive health monitoring is seamless and accessible to everyone everywhere.",
                teamT: "The Team", uni: "Zagazig University - Faculty of Engineering",
                verTitle: "Verify Identity", verSub: "Code sent via SMS", lblVerify: "VERIFY & REGISTER",
                dashBtnText: "OPEN DASHBOARD"
            },
            ar: { 
                uiTitle: "تسجيل الدخول", ph: "1xxxxxxxxx", btnScan: "بدء الفحص", success: "تم بنجاح", toastLogin: "تم التحقق",
                conTitle: "شروط الاستخدام والخصوصية",
                conBody: `<b>شروط الاستخدام واتفاقية خصوصية البيانات</b><br><br><b>1. غرض إرشادي فقط:</b> هذا النظام مخصص للأغراض الاسترشادية والمعلوماتية فقط، ولا يعتبر بديلاً عن التشخيص الطبي المهني أو العلاج.<br><br><b>2. حالات الطوارئ:</b> في حالة وجود طارئ طبي، يرجى الاتصال بخدمات الطوارئ المحلية أو التوجه لأقرب مستشفى فوراً. لا تعتمد على هذا النظام في اتخاذ قرارات مصيرية.<br><br><b>3. خصوصية البيانات:</b> يتم تخزين علاماتك الحيوية وبياناتك الشخصية بشكل آمن على خوادمنا السحابية (Firebase). باستمرارك في الاستخدام، فأنت توافق على معالجة هذه البيانات.<br><br><b>4. التحليل الذكي:</b> التقارير الصادرة عن الذكاء الاصطناعي هي مجرد تحليل للأنماط الإحصائية ويجب مراجعتها من قبل طبيب مختص.`,
                lblAgree: "أقر بأنني قرأت الشروط وأوافق عليها.", lblSend: "موافق والمتابعة",
                projName: "بايوسكان ATM", sub: "مشروع التخرج 2026", missionT: "المهمة", mission: "تمكين المجتمعات من التشخيص الصحي الفوري على مستوى المستشفيات عبر إنترنت الأشياء.",
                visionT: "الرؤية", vision: "عالم حيث يكون مراقبة الصحة الاستباقية سلسة ومتاحة للجميع في كل مكان.",
                teamT: "الفريق", uni: "جامعة الزقازيق - كلية الهندسة",
                verTitle: "التحقق من الهوية", verSub: "تم إرسال الرمز عبر الرسائل النصية", lblVerify: "التحقق والتسجيل",
                dashBtnText: "فتح لوحة التحكم"
            }
        };

        function updateTexts() {
            const t = txt[currentLang]; document.body.style.direction = currentLang === 'ar' ? 'rtl' : 'ltr';
            document.getElementById("ui-title").innerText = t.uiTitle;
            document.getElementById("btn-text").innerText = t.btnScan;
            document.getElementById("con-title").innerText = t.conTitle;
            document.getElementById("con-body").innerHTML = t.conBody;
            document.getElementById("lblAgree").innerText = t.lblAgree;
            document.getElementById("lblSend").innerText = t.lblSend;
            document.getElementById("lblRem").innerText = currentLang === 'ar' ? "تذكرني" : "Remember Me";
            
            // Modals Static - with safe checks
            const modalProjName = document.getElementById("modal-project-name");
            if(modalProjName) modalProjName.innerText = t.projName;
            
            const modalSubtitle = document.getElementById("modal-subtitle");
            if(modalSubtitle) modalSubtitle.innerText = t.sub;
            
            document.getElementById("mission-title").innerText = t.missionT;
            document.getElementById("mission-text").innerText = t.mission;
            document.getElementById("vision-title").innerText = t.visionT;
            document.getElementById("vision-text").innerText = t.vision;
            document.getElementById("team-title").innerText = t.teamT;
            
            const uniText = document.getElementById("uni-text");
            if(uniText) uniText.innerText = t.uni;
            
            // Verification Modal
            const verTitle = document.getElementById("ver-title");
            if(verTitle) verTitle.innerText = t.verTitle;
            
            const verSub = document.getElementById("ver-sub");
            if(verSub) verSub.innerText = t.verSub;
            
            const lblVerify = document.getElementById("lblVerify");
            if(lblVerify) lblVerify.innerText = t.lblVerify;
            
            // Dashboard Button
            const dashBtnText = document.getElementById("dash-btn-text");
            if(dashBtnText) dashBtnText.innerText = t.dashBtnText;
        }

        function showToast(m, t) { const c = document.getElementById("toastContainer"); const el = document.createElement("div"); el.className = "toast"; el.style.borderLeftColor = t==='error'?'var(--error)':'var(--success)'; el.innerHTML = `<i class="fas fa-info-circle"></i> ${m}`; c.appendChild(el); setTimeout(()=>el.remove(), 3500); }
        function goToDashboard() { window.location.href = "measurements.html"; }
        function resetView() { document.getElementById("success-view").style.display = "none"; document.getElementById("login-view").style.display = "block"; }
        function toggleModal(id, show) { const m = document.getElementById(id); if(show) { m.style.display = 'flex'; setTimeout(()=>m.classList.add('active'), 10); } else { m.classList.remove('active'); setTimeout(()=>m.style.display='none', 300); } }

        // NEW: System Terminal Animation
        function initializeTerminal() {
            const terminalOutput = document.getElementById('terminalOutput');
            
            // Initial boot sequence
            const bootSequence = [
                { text: 'Initializing Bio-Kernel...', delay: 500 },
                { text: 'Loading Health Modules... OK', delay: 1000 },
                { text: 'Connecting to Cloud DB... SUCCESS', delay: 1500 },
                { text: 'Calibrating Sensors... DONE', delay: 2000 },
                { text: 'System Ready. Monitoring...', delay: 2500 }
            ];
            
            // Periodic monitoring commands
            const monitoringCommands = [
                'Checking network latency... 42ms',
                'Scanning for firmware updates... None',
                'Validating encryption keys... Valid',
                'Running system diagnostics... PASS',
                'Checking sensor readings... Normal',
                'Monitoring database sync... Active',
                'Verifying security protocols... OK',
                'Analyzing traffic patterns... Stable',
                'Testing backup systems... Ready',
                'Checking power supply... Optimal',
                'Monitoring CPU load... 23%',
                'Verifying data integrity... 100%',
                'Refreshing cache memory... Done',
                'Checking SSL certificates... Valid',
                'Running health check... All systems go'
            ];
            
            let commandIndex = 0;
            
            // Display boot sequence
            bootSequence.forEach((line, index) => {
                setTimeout(() => {
                    const lineEl = document.createElement('div');
                    lineEl.className = 'terminal-line';
                    lineEl.textContent = line.text;
                    terminalOutput.appendChild(lineEl);
                    
                    // After boot sequence, start periodic monitoring
                    if (index === bootSequence.length - 1) {
                        setTimeout(() => startPeriodicMonitoring(), 1000);
                    }
                }, line.delay);
            });
            
            // Function to add periodic monitoring lines
            function startPeriodicMonitoring() {
                setInterval(() => {
                    // Remove cursor if exists
                    const existingCursor = terminalOutput.querySelector('.terminal-cursor');
                    if (existingCursor) existingCursor.remove();
                    
                    // Limit terminal lines to prevent overflow (keep last 6 lines visible)
                    const lines = terminalOutput.querySelectorAll('.terminal-line');
                    if (lines.length > 6) {
                        terminalOutput.removeChild(lines[0]);
                    }
                    
                    // Add new monitoring command
                    const lineEl = document.createElement('div');
                    lineEl.className = 'terminal-line';
                    lineEl.textContent = monitoringCommands[commandIndex];
                    terminalOutput.appendChild(lineEl);
                    
                    // Add cursor after new line
                    setTimeout(() => {
                        const cursor = document.createElement('span');
                        cursor.className = 'terminal-cursor';
                        terminalOutput.appendChild(cursor);
                    }, 300);
                    
                    // Cycle through commands
                    commandIndex = (commandIndex + 1) % monitoringCommands.length;
                    
                }, 4000); // New command every 4 seconds
            }
        }
    </script>
</body>
</html>
